# AdGuard Home Configuration
# Managed by Git - configs repo
# Templated by Ansible - variables defined in group_vars/adguard_servers.yml

bind_host: {{ adguard_bind_host }}
bind_port: {{ adguard_port }}
users: []
auth_attempts: {{ adguard_auth_attempts }}
block_auth_min: {{ adguard_block_auth_min }}
http_proxy: "{{ adguard_http_proxy }}"
language: "{{ adguard_language }}"
rlimit_nofile: {{ adguard_rlimit_nofile }}
dns:
  bind_hosts:
{% for host in adguard_dns_bind_hosts %}
    - {{ host }}
{% endfor %}
  port: {{ adguard_dns_port }}
  protection_enabled: {{ adguard_protection_enabled | lower }}
  filtering_enabled: {{ adguard_filtering_enabled | lower }}
  blocking_mode: {{ adguard_blocking_mode }}
  blocking_ipv4: "{{ adguard_blocking_ipv4 }}"
  blocking_ipv6: "{{ adguard_blocking_ipv6 }}"
  blocked_response_ttl: {{ adguard_blocked_response_ttl }}
  ratelimit: {{ adguard_ratelimit }}
  ratelimit_whitelist: {{ adguard_ratelimit_whitelist | to_json }}
  refuse_any: {{ adguard_refuse_any | lower }}
  upstream_dns:
{% for upstream in adguard_upstream_dns %}
    - {{ upstream }}
{% endfor %}
  upstream_dns_file: "{{ adguard_upstream_dns_file }}"
  bootstrap_dns:
{% for bootstrap in adguard_bootstrap_dns %}
    - {{ bootstrap }}
{% endfor %}
  all_servers: {{ adguard_all_servers | lower }}
  fastest_addr: {{ adguard_fastest_addr | lower }}
  fastest_timeout: {{ adguard_fastest_timeout }}
  allowed_clients: {{ adguard_allowed_clients | to_json }}
  disallowed_clients: {{ adguard_disallowed_clients | to_json }}
  blocked_hosts: {{ adguard_blocked_hosts | to_json }}
  parental_sensitivity: {{ adguard_parental_sensitivity }}
  parental_enabled: {{ adguard_parental_enabled | lower }}
  safesearch_enabled: {{ adguard_safesearch_enabled | lower }}
  safebrowsing_enabled: {{ adguard_safebrowsing_enabled | lower }}
  safebrowsing_cache_size: {{ adguard_safebrowsing_cache_size }}
  safesearch_cache_size: {{ adguard_safesearch_cache_size }}
  parental_cache_size: {{ adguard_parental_cache_size }}
  cache_time: {{ adguard_cache_time }}
  cache_optimistic: {{ adguard_cache_optimistic | lower }}
  bogus_nxdomain: {{ adguard_bogus_nxdomain | to_json }}
  aaaa_disabled: {{ adguard_aaaa_disabled | lower }}
  enable_dnssec: {{ adguard_enable_dnssec | lower }}
  edns_client_subnet: {{ adguard_edns_client_subnet | lower }}
  max_goroutines: {{ adguard_max_goroutines }}
  handle_ddr: {{ adguard_handle_ddr | lower }}
  ipset: {{ adguard_ipset | to_json }}
  filters_update_interval: {{ adguard_filters_update_interval }}
  rewrites: {{ adguard_rewrites | to_json }}
  blocked_services: {{ adguard_blocked_services | to_json }}
tls:
  enabled: {{ adguard_tls_enabled | lower }}
  server_name: "{{ adguard_tls_server_name }}"
  force_https: {{ adguard_tls_force_https | lower }}
  port_https: {{ adguard_tls_port_https }}
  port_dns_over_tls: {{ adguard_tls_port_dns_over_tls }}
  port_dns_over_quic: {{ adguard_tls_port_dns_over_quic }}
  certificate_chain: "{{ adguard_tls_certificate_chain }}"
  private_key: "{{ adguard_tls_private_key }}"
  certificate_path: "{{ adguard_tls_certificate_path }}"
  private_key_path: "{{ adguard_tls_private_key_path }}"
filters: {{ adguard_filters | to_json }}
whitelist_filters: {{ adguard_whitelist_filters | to_json }}
user_rules: {{ adguard_user_rules | to_json }}
dhcp:
  enabled: {{ adguard_dhcp_enabled | lower }}
clients:
  runtime_sources:
    whois: {{ adguard_clients_whois | lower }}
    arp: {{ adguard_clients_arp | lower }}
    rdns: {{ adguard_clients_rdns | lower }}
    dhcp: {{ adguard_clients_dhcp | lower }}
    hosts: {{ adguard_clients_hosts | lower }}
  persistent: {{ adguard_clients_persistent | to_json }}
log_file: "{{ adguard_log_file }}"
verbose: {{ adguard_verbose | lower }}
schema_version: {{ adguard_schema_version }}

