# Gromox SMTP Configuration
# Generated by Ansible

# Listen on all interfaces (IPv6 and IPv4)
listen_ip = ::
listen_port = {{ grommunio_smtp_port }}

# Connection limits
max_connections = 100

# Logging
log_file = {{ grommunio_log_dir }}/smtp.log
log_level = 4

# Authentication
auth_mechanism = plain
auth_required = yes

# TLS (optional, not needed behind Traefik for HTTP)
# tls_cert_file =
# tls_key_file =
# tls_ca_file =

# Relay configuration (optional)
{% if grommunio_smtp_relay_enabled | default(false) %}
relay_enabled = yes
relay_host = {{ grommunio_smtp_relay_host }}
relay_port = {{ grommunio_smtp_relay_port | default(587) }}
{% if grommunio_smtp_relay_user | default('') | length > 0 %}
relay_user = {{ grommunio_smtp_relay_user }}
relay_password = {{ grommunio_smtp_relay_password | default('') }}
{% endif %}
{% else %}
relay_enabled = no
{% endif %}
