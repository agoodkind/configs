# Management Interface - Static IP + DHCP for hostname registration
# Generated by Ansible for {{ hostname }}

[Match]
Name={{ vm_mgmt_iface }}

[Network]
# Static IPv4 address
Address={{ vm_mgmt_ipv4 }}/{{ vm_mgmt_ipv4_prefix }}
# Static IPv6 address
Address={{ vm_mgmt_ipv6 }}/{{ vm_mgmt_ipv6_prefix }}
# Default gateway
Gateway={{ vm_mgmt_gateway_ipv4 }}
# IPv6 gateway
Gateway={{ vm_mgmt_gateway_ipv6 }}
# DNS configuration
DNS={{ vm_mgmt_dns_servers }}
Domains={{ vm_mgmt_dns_domain }}
# DHCP for hostname registration
DHCP=yes
# Accept IPv6 router advertisements
IPv6AcceptRA=yes

[DHCPv4]
# Send hostname to DHCP server for DNS registration
SendHostname=yes
Hostname={{ hostname.split('.')[0] }}

[DHCPv6]
# Send hostname for DHCPv6 if supported
SendHostname=yes
Hostname={{ hostname.split('.')[0] }}
