---
# Container hostname
adguard_hostname: adguard.home.goodkind.io

# Static addressing (pinned; independent of VMID)
adguard_ipv4: "10.250.0.53/24"
adguard_ipv6: "3d06:bad:b01::53/64"

# Stable MAC address for DHCP reservations (KEA: hostname "adguard")
# IPv4 reservation: 10.250.0.53 -> BC:24:11:EE:F9:50
# IPv6 reservation: 3d06:bad:b01::53 -> BC:24:11:EE:F9:50
adguard_mac_address: "bc:24:11:ee:f9:50"

# AdGuard Home Configuration Variables
# Override these in your own environment or use ansible-vault for sensitive values

# ACME / Let's Encrypt (certbot DNS-01 via Cloudflare)
adguard_acme_email: "alex@goodkind.io"
# cloudflare_api_token inherited from all/vars.yml (references vault)

# Web interface configuration (non-default: IPv6 bind address)
adguard_bind_host: "::"
adguard_port: 3000

# DNS configuration (non-default values only)
# Default bind_hosts is [IPv4Unspecified]; we use IPv6
adguard_dns_bind_hosts:
  - "::"

# Upstream DNS servers (non-default)
adguard_upstream_dns:
  - "quic://adguard-home-7d698e.dns.nextdns.io"
  - "tls://adguard-home-7d698e.dns.nextdns.io"

# Bootstrap DNS servers (non-default)
adguard_bootstrap_dns:
  - "2a07:a8c1::7d:698e"

# Fallback DNS servers (non-default)
adguard_fallback_dns:
  - "2a07:a8c0::7d:698e"

# Upstream mode (default is load_balance, we use parallel)
adguard_upstream_mode: parallel

# DNS security (non-default: DNSSEC enabled, ECS enabled)
adguard_enable_dnssec: true
adguard_edns_client_subnet: true

# DNS64 (non-default: enabled for IPv6-only client access to IPv4 services)
adguard_use_dns64: true
adguard_dns64_prefixes:
  - "64:ff9b::/96"

# Filtering (non-default: blocking_mode and safebrowsing)
adguard_blocking_mode: nxdomain
adguard_safebrowsing_enabled: true

# Client detection (non-default: RDNS disabled)
adguard_clients_rdns: false

# Statistics interval (non-default: 2160h instead of 24h)
adguard_stats_interval: 2160h

# DNS rewrites (domain overrides)
adguard_rewrites: []

# Filters (non-default list)
adguard_filters:
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_24.txt
    name: 1Hosts (Lite)
    id: 1765787746
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_70.txt
    name: 1Hosts (Xtra)
    id: 1765787747
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_1.txt
    name: AdGuard DNS filter
    id: 1765787748
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_59.txt
    name: AdGuard DNS Popup Hosts filter
    id: 1765787749
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_53.txt
    name: AWAvenue Ads Rule
    id: 1765787750
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_4.txt
    name: Dan Pollock's List
    id: 1765787751
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_34.txt
    name: HaGeZi's Normal Blocklist
    id: 1765787752
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_48.txt
    name: HaGeZi's Pro Blocklist
    id: 1765787753
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_51.txt
    name: HaGeZi's Pro++ Blocklist
    id: 1765787754
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_49.txt
    name: HaGeZi's Ultimate Blocklist
    id: 1765787755
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_5.txt
    name: OISD Blocklist Small
    id: 1765787756
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_27.txt
    name: OISD Blocklist Big
    id: 1765787757
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_3.txt
    name: Peter Lowe's Blocklist
    id: 1765787758
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_69.txt
    name: ShadowWhisperer Tracking List
    id: 1765787759
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_33.txt
    name: Steven Black's List
    id: 1765787760
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_61.txt
    name: HaGeZi's Samsung Tracker Blocklist
    id: 1765848073
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_65.txt
    name: HaGeZi's Vivo Tracker Blocklist
    id: 1765848074
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_63.txt
    name: HaGeZi's Windows/Office Tracker Blocklist
    id: 1765848075
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_60.txt
    name: HaGeZi's Xiaomi Tracker Blocklist
    id: 1765848076
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_30.txt
    name: Phishing URL Blocklist (PhishTank and OpenPhish)
    id: 1765848077
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_12.txt
    name: Dandelion Sprout's Anti-Malware List
    id: 1765848078
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_55.txt
    name: HaGeZi's Badware Hoster Blocklist
    id: 1765848079
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_56.txt
    name: HaGeZi's The World's Most Abused TLDs
    id: 1765848080
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_8.txt
    name: NoCoin Filter List
    id: 1765848081
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_18.txt
    name: Phishing Army
    id: 1765848082
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_10.txt
    name: Scam Blocklist by DurableNapkin
    id: 1765848083
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_42.txt
    name: ShadowWhisperer's Malware List
    id: 1765848084
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_31.txt
    name: Stalkerware Indicators List
    id: 1765848085
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_9.txt
    name: The Big List of Hacked Malware Web Sites
    id: 1765848086
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_50.txt
    name: uBlock₀ filters – Badware risks
    id: 1765848087
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_11.txt
    name: Malicious URL Blocklist (URLHaus)
    id: 1765848088
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_66.txt
    name: HaGeZi's OPPO & Realme Tracker Blocklist
    id: 1765864766
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_7.txt
    name: Perflyst and Dandelion Sprout's Smart-TV Blocklist
    id: 1765864767
  - enabled: false
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_57.txt
    name: ShadowWhisperer's Dating List
    id: 1765864768
  - enabled: true
    url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_62.txt
    name: Ukrainian Security Filter
    id: 1765864769
adguard_user_rules:
  - "@@||drd.sh^"
  - "@@||ifconfig.co^$important"
  - "@@||browser-intake-datadoghq.com^$client='10.250.10.4'"
  - "@@||app-analytics-services.com^$client='10.250.10.4'"
  - "@@||xerxes-sub.xerxessecure.com^$client='10.250.10.4'"
  - "@@||xerxes-sub.xerxessecure.com^$important"
  - "@@||xerxes-context-prod.codebig2.net^$important"
  - "@@||mfa.comcast.com^$important"
  - "@@||assets.xfinity.com^$important"
  - "@@||api.xfinitymfa.com^$important"
  - "@@||static.cimcontent.net^$important"
  - "@@||secure-niagaralog-prod.codebig2.net^$important"
  - "@@||gs-loc.apple.com^$important"
  - "@@||daf.xp.apple.com^$important"
  - "@@||verifi.podscribe.com^$important"
  - "@@||chime-public-assets.prod-ext.chmfin.com^$important"
  - "@@||enrollment-web-app-assets.prod-ext.chmfin.com^$important"
  - "@@||event-router.chime.com^$important"
  - "@@||analyticsmobile-pa.googleapis.com^$important"
  - "@@||cdn.perfops.net^$important"
  - "@@||assets.adobedtm.com^$important"
  - "@@||api.perfops.net^$important"
  - ""

# TLS configuration
adguard_tls_enabled: true
adguard_tls_server_name: "{{ adguard_hostname }}"
adguard_tls_force_https: true
adguard_tls_port_https: 443
adguard_tls_port_dns_over_tls: 853
adguard_tls_port_dns_over_quic: 784
adguard_tls_certificate_path: "{{ adguard_work_dir }}/certs/fullchain.pem"
adguard_tls_private_key_path: "{{ adguard_work_dir }}/certs/privkey.pem"

# Logging (non-default: log to file instead of stdout)
adguard_log_file: "{{ adguard_data_dir }}/adguard.log"

# Directory configuration (using AdGuard Home defaults)
adguard_user: adguard
adguard_group: adguard
adguard_work_dir: /opt/AdGuardHome
adguard_config_dir: /opt/AdGuardHome
adguard_data_dir: /opt/AdGuardHome/data

# Container login directory (prep-guests.yml)
login_dir: /opt/AdGuardHome
