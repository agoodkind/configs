---
- name: Interactive SSH key deployment
  hosts: localhost
  gather_facts: false
  vars_prompt:
    - name: container_id
      prompt: "Enter container VMID (leave empty for all containers)"
      private: false
      default: ""

  tasks:
    - name: Display available containers
      ansible.builtin.debug:
        msg: "Available containers: {{ groups['proxmox_all_lxc'] | join(', ') }}"
      when: container_id == ""

    - name: Confirm deployment target
      ansible.builtin.debug:
        msg: "{{ 'Deploying to all LXC containers' if container_id == '' else 'Deploying to container VMID: ' + container_id }}"

- name: Run deploy-ssh-keys playbook
  ansible.builtin.import_playbook: deploy-ssh-keys.yml
